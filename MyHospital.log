2022-01-27 20:50:08.808  INFO 14448 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-01-27 20:50:08.820  INFO 14448 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:09.483  WARN 14448 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-01-27 20:50:10.316  INFO 14448 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d619bcb, org.springframework.security.web.context.SecurityContextPersistenceFilter@7ae97a58, org.springframework.security.web.header.HeaderWriterFilter@276b68af, org.springframework.security.web.authentication.logout.LogoutFilter@18f1631c, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@457dc809, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6421e9e7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67c61551, org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter@1af29a19, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57f83dc7, org.springframework.security.web.session.SessionManagementFilter@65130cf2, org.springframework.security.web.access.ExceptionTranslationFilter@6d028c7e]
2022-01-27 20:50:11.409  INFO 14448 --- [main] c.i.m.s.i.MedicalHistoryServiceImplTest  : Started MedicalHistoryServiceImplTest in 8.148 seconds (JVM running for 10.024)
2022-01-27 20:50:11.485  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory() with arguments [s]=[1, myachin]
2022-01-27 20:50:11.498  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:11.510  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}
2022-01-27 20:50:11.511 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:006
2022-01-27 20:50:11.512  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findByUser() with arguments [s]=[User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}]
2022-01-27 20:50:11.536  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.findByUser Result =Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}
2022-01-27 20:50:11.536 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:005
2022-01-27 20:50:11.544  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory Result =MedicalHistory{id=1, receiptDate=2022-01-27 20:50:11.4591263, dischargeDate=null, diagnosis=Diagnosis(id=1, name=ORVI, personal=Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}), patient=Person{id=2, firstName='Beliy', surname='Dima', patronymic='Dimovich', address='g.Minsk', hireDate=null, dateOfBirthday=2022-01-27}}
2022-01-27 20:50:11.544 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:050
2022-01-27 20:50:11.573  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory() with arguments [s]=[1, myachin]
2022-01-27 20:50:11.574  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:11.574  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}
2022-01-27 20:50:11.574 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:11.575  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findByUser() with arguments [s]=[User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}]
2022-01-27 20:50:11.575  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.findByUser Result =Person{id=2, firstName='Beliy', surname='Dima', patronymic='Dimovich', address='g.Minsk', hireDate=null, dateOfBirthday=2022-01-27}
2022-01-27 20:50:11.575 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:11.575  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory Result =MedicalHistory{id=1, receiptDate=2022-01-27 20:50:11.5721472, dischargeDate=null, diagnosis=Diagnosis(id=1, name=ORVI, personal=Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}), patient=Person{id=2, firstName='Beliy', surname='Dima', patronymic='Dimovich', address='g.Minsk', hireDate=null, dateOfBirthday=2022-01-27}}
2022-01-27 20:50:11.575 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:11.585  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.deleteById() with arguments [s]=[3]
2022-01-27 20:50:11.586 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.deleteById with cause  = NULL , with message =  Medical history doesn't exist with id: 
2022-01-27 20:50:11.595  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.findById() with arguments [s]=[3]
2022-01-27 20:50:11.595 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.findById with cause  = NULL , with message =  Medical history doesn't exist with id: 3
2022-01-27 20:50:11.604  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.dischargePatient() with arguments [s]=[1]
2022-01-27 20:50:11.605  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.dischargePatient Result =true
2022-01-27 20:50:11.605 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:11.614  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.getHistoriesOfPatient() with arguments [s]=[myachin]
2022-01-27 20:50:11.614  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByUsernameOfUser() with arguments [s]=[myachin]
2022-01-27 20:50:11.615  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByUsernameOfUser Result =Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}
2022-01-27 20:50:11.615 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:11.616  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.getHistoriesOfPatient Result =[]
2022-01-27 20:50:11.616 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:002
2022-01-27 20:50:11.627  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.getHistoriesOfPatient() with arguments [s]=[myachin]
2022-01-27 20:50:11.627  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByUsernameOfUser() with arguments [s]=[myachin]
2022-01-27 20:50:11.627 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.getHistoriesOfPatient with cause  = NULL , with message =  User doesn't have a person
2022-01-27 20:50:11.636  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.findById() with arguments [s]=[1]
2022-01-27 20:50:11.636  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.findById Result =MedicalHistory{id=1, receiptDate=2022-01-27 20:50:11.6351619, dischargeDate=null, diagnosis=Diagnosis(id=1, name=ORVI, personal=Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}), patient=Person{id=2, firstName='Beliy', surname='Dima', patronymic='Dimovich', address='g.Minsk', hireDate=null, dateOfBirthday=2022-01-27}}
2022-01-27 20:50:11.637 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:11.647  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory() with arguments [s]=[1, myachin]
2022-01-27 20:50:11.648 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory with cause  = NULL , with message =  Medical history doesn't exist with id: 1
2022-01-27 20:50:11.657  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory() with arguments [s]=[1, myachin]
2022-01-27 20:50:11.658  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:11.659 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory with cause  = NULL , with message =  User doesn't exist with name myachin
2022-01-27 20:50:11.669  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory() with arguments [s]=[1, myachin]
2022-01-27 20:50:11.669  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:11.670  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}
2022-01-27 20:50:11.670 TRACE 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:11.670  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findByUser() with arguments [s]=[User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}]
2022-01-27 20:50:11.671 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.checkPersonForViewHistory with cause  = NULL , with message =  User doesn't have enough permissions
2022-01-27 20:50:11.678  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.dischargePatient() with arguments [s]=[1]
2022-01-27 20:50:11.679 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.dischargePatient with cause  = NULL , with message =  Medical history doesn't exist with id: 1
2022-01-27 20:50:11.687  INFO 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.dischargePatient() with arguments [s]=[1]
2022-01-27 20:50:11.688 ERROR 14448 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.MedicalHistoryServiceImpl.dischargePatient with cause  = NULL , with message =  Medical history has already discharged
2022-01-27 20:50:11.708  INFO 14448 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:19.366  INFO 6984 --- [main] c.i.m.s.i.NameOfProcessServiceImplTest   : Starting NameOfProcessServiceImplTest using Java 11.0.12 on WIN-3N9M47L5BER with PID 6984 (started by User in D:\NewProjects\MyHospitalOne\MyHospital)
2022-01-27 20:50:19.367 DEBUG 6984 --- [main] c.i.m.s.i.NameOfProcessServiceImplTest   : Running with Spring Boot v2.6.1, Spring v5.3.13
2022-01-27 20:50:19.367  INFO 6984 --- [main] c.i.m.s.i.NameOfProcessServiceImplTest   : No active profile set, falling back to default profiles: default
2022-01-27 20:50:20.582  INFO 6984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-01-27 20:50:20.777  INFO 6984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 180 ms. Found 10 JPA repository interfaces.
2022-01-27 20:50:21.736  INFO 6984 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'mvcConfig' of type [com.itacademy.myhospital.config.MvcConfig$$EnhancerBySpringCGLIB$$dbc4aee] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-01-27 20:50:22.956  INFO 6984 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 8.0.4 by Redgate
2022-01-27 20:50:22.956  INFO 6984 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:3306/my_hospital (MySQL 8.0)
2022-01-27 20:50:23.029  INFO 6984 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 15 migrations (execution time 00:00.037s)
2022-01-27 20:50:23.046  INFO 6984 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `my_hospital`: 15
2022-01-27 20:50:23.047  INFO 6984 --- [main] o.f.core.internal.command.DbMigrate      : Schema `my_hospital` is up to date. No migration necessary.
2022-01-27 20:50:23.275  INFO 6984 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2022-01-27 20:50:23.332  INFO 6984 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.1.Final
2022-01-27 20:50:23.379  INFO 6984 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-01-27 20:50:23.579  INFO 6984 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2022-01-27 20:50:24.305  INFO 6984 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-01-27 20:50:24.313  INFO 6984 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:25.104  WARN 6984 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-01-27 20:50:25.897  INFO 6984 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ebcfcf1, org.springframework.security.web.context.SecurityContextPersistenceFilter@615bd28b, org.springframework.security.web.header.HeaderWriterFilter@29390110, org.springframework.security.web.authentication.logout.LogoutFilter@11ec699, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1b1d1558, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5482b32a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38241615, org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter@47a68e3f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8e100e7, org.springframework.security.web.session.SessionManagementFilter@17e725fb, org.springframework.security.web.access.ExceptionTranslationFilter@409df37d]
2022-01-27 20:50:27.235  INFO 6984 --- [main] c.i.m.s.i.NameOfProcessServiceImplTest   : Started NameOfProcessServiceImplTest in 8.298 seconds (JVM running for 10.062)
2022-01-27 20:50:27.337  INFO 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.findById() with arguments [s]=[2]
2022-01-27 20:50:27.349 ERROR 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.findById with cause  = NULL , with message =  There is no name of process with id 2
2022-01-27 20:50:27.406  INFO 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.checkNameOfProcesses() with arguments [s]=[MedicalHistoryDtoWithProcesses(id=1, complain=Dadadada, patient=null, diagnosis=null, medicalHistoryProcesses=[MedicalHistoryProcess(id=1, numberOfDays=2, quantityPerDay=3, nameOfProcess=NameOfProcess{id=1, name='Urinoteropia'}, status=false, medicalHistory=null), MedicalHistoryProcess(id=2, numberOfDays=1, quantityPerDay=1, nameOfProcess=NameOfProcess{id=3, name='Paracetamol'}, status=false, medicalHistory=null)])]
2022-01-27 20:50:27.407  INFO 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.checkNameOfProcesses Result =MedicalHistoryDtoWithProcesses(id=1, complain=Dadadada, patient=null, diagnosis=null, medicalHistoryProcesses=[MedicalHistoryProcess(id=1, numberOfDays=2, quantityPerDay=3, nameOfProcess=NameOfProcess{id=1, name='Urinoteropia'}, status=false, medicalHistory=null), MedicalHistoryProcess(id=2, numberOfDays=1, quantityPerDay=1, nameOfProcess=NameOfProcess{id=3, name='Paracetamol'}, status=false, medicalHistory=null)])
2022-01-27 20:50:27.409 TRACE 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:27.420  INFO 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.findById() with arguments [s]=[1]
2022-01-27 20:50:27.421  INFO 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.findById Result =NameOfProcess{id=1, name='Urinoteropia'}
2022-01-27 20:50:27.421 TRACE 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:27.429  INFO 6984 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.NameOfProcessServiceImpl.deleteById() with arguments [s]=[1]
2022-01-27 20:50:27.449  INFO 6984 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:35.472  INFO 1784 --- [main] c.i.m.s.impl.PersonServiceImplTest       : Starting PersonServiceImplTest using Java 11.0.12 on WIN-3N9M47L5BER with PID 1784 (started by User in D:\NewProjects\MyHospitalOne\MyHospital)
2022-01-27 20:50:35.473 DEBUG 1784 --- [main] c.i.m.s.impl.PersonServiceImplTest       : Running with Spring Boot v2.6.1, Spring v5.3.13
2022-01-27 20:50:35.474  INFO 1784 --- [main] c.i.m.s.impl.PersonServiceImplTest       : No active profile set, falling back to default profiles: default
2022-01-27 20:50:36.544  INFO 1784 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-01-27 20:50:36.670  INFO 1784 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 113 ms. Found 10 JPA repository interfaces.
2022-01-27 20:50:37.639  INFO 1784 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'mvcConfig' of type [com.itacademy.myhospital.config.MvcConfig$$EnhancerBySpringCGLIB$$bade8ab7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-01-27 20:50:38.774  INFO 1784 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 8.0.4 by Redgate
2022-01-27 20:50:38.774  INFO 1784 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:3306/my_hospital (MySQL 8.0)
2022-01-27 20:50:38.856  INFO 1784 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 15 migrations (execution time 00:00.047s)
2022-01-27 20:50:38.871  INFO 1784 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `my_hospital`: 15
2022-01-27 20:50:38.872  INFO 1784 --- [main] o.f.core.internal.command.DbMigrate      : Schema `my_hospital` is up to date. No migration necessary.
2022-01-27 20:50:39.070  INFO 1784 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2022-01-27 20:50:39.127  INFO 1784 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.1.Final
2022-01-27 20:50:39.176  INFO 1784 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-01-27 20:50:39.363  INFO 1784 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2022-01-27 20:50:40.090  INFO 1784 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-01-27 20:50:40.102  INFO 1784 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:40.696  WARN 1784 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-01-27 20:50:41.540  INFO 1784 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34c050a1, org.springframework.security.web.context.SecurityContextPersistenceFilter@32a29361, org.springframework.security.web.header.HeaderWriterFilter@4c5379f5, org.springframework.security.web.authentication.logout.LogoutFilter@5e1535e0, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@51a06fd5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@481b8d53, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3524ee20, org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter@3be60847, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ecf4608, org.springframework.security.web.session.SessionManagementFilter@1d3bf0af, org.springframework.security.web.access.ExceptionTranslationFilter@207358ad]
2022-01-27 20:50:42.750  INFO 1784 --- [main] c.i.m.s.impl.PersonServiceImplTest       : Started PersonServiceImplTest in 7.68 seconds (JVM running for 9.492)
2022-01-27 20:50:42.889  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson() with arguments [s]=[asl,qlw,q, myachin]
2022-01-27 20:50:42.904  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:42.916  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=false, email='Myachin@mail.ru'}
2022-01-27 20:50:42.917 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:005
2022-01-27 20:50:42.931  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson Result =Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}
2022-01-27 20:50:42.931 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:028
2022-01-27 20:50:42.970  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findAll() with arguments [s]=[]
2022-01-27 20:50:42.971  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.findAll Result =[Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}, Person{id=2, firstName='Beliy', surname='Dima', patronymic='Dimovich', address='g.Minsk', hireDate=null, dateOfBirthday=2022-01-27}]
2022-01-27 20:50:42.971 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:42.981  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.deleteById() with arguments [s]=[2]
2022-01-27 20:50:42.982 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.deleteById with cause  = NULL , with message =  The person doesn't exist with id : 
2022-01-27 20:50:42.989  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkRequestParameterFromSelect() with arguments [s]=[1a]
2022-01-27 20:50:42.989  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkRequestParameterFromSelect Result =false
2022-01-27 20:50:42.989 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.048  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson() with arguments [s]=[asl,qlw,q, myachin]
2022-01-27 20:50:43.049  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:43.050  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=false, email='Myachin@mail.ru'}
2022-01-27 20:50:43.050 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.051 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson with cause  = NULL , with message =  Person also has a user or no person with this key
2022-01-27 20:50:43.108  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson() with arguments [s]=[asl,qlw,q, myachin]
2022-01-27 20:50:43.109  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:43.109  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=false, email='Myachin@mail.ru'}
2022-01-27 20:50:43.110 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.110 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson with cause  = NULL , with message =  Person also has a user or no person with this key
2022-01-27 20:50:43.174  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson() with arguments [s]=[asl,qlw,q, myachin]
2022-01-27 20:50:43.175  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:43.175  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername Result =User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}
2022-01-27 20:50:43.175 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.176 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson with cause  = NULL , with message =  User also has a person
2022-01-27 20:50:43.209  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson() with arguments [s]=[asl,qlw,q, myachin]
2022-01-27 20:50:43.210  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.findByUsername() with arguments [s]=[myachin]
2022-01-27 20:50:43.211 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.addUserToPerson with cause  = NULL , with message =  User also has a person
2022-01-27 20:50:43.222  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.getPageOfPersonWithRoleId() with arguments [s]=[1, 1]
2022-01-27 20:50:43.223 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.getPageOfPersonWithRoleId with cause  = NULL , with message =  There are no persons with the role: 1
2022-01-27 20:50:43.233  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkRequestParameterFromSelect() with arguments [s]=[1]
2022-01-27 20:50:43.234  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkRequestParameterFromSelect Result =true
2022-01-27 20:50:43.234 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.243  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findById() with arguments [s]=[2]
2022-01-27 20:50:43.244 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.findById with cause  = NULL , with message =  The person doesn't exist with id : 
2022-01-27 20:50:43.252  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkAndFindPersonal() with arguments [s]=[1]
2022-01-27 20:50:43.259 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.checkAndFindPersonal with cause  = NULL , with message =  The person doesn't exist with id : 1 and role id: 3
2022-01-27 20:50:43.270  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.createPersonDtoFromPerson() with arguments [s]=[1]
2022-01-27 20:50:43.290  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.createPersonDtoFromPerson Result =PersonDto(id=1, firstName=Myachin, surname=Artem, patronymic=Valerevich, address=g.Grodno, dateOfBirthday=2022-01-27, phoneNumber=null, user=User{username='myachin', authenticationStatus=true, email='Myachin@mail.ru'}, keyForUser=asl,qlw,q)
2022-01-27 20:50:43.290 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:43.301  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.createPersonDtoFromPerson() with arguments [s]=[20]
2022-01-27 20:50:43.301 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.createPersonDtoFromPerson with cause  = NULL , with message =  The person doesn't exist with id : 
2022-01-27 20:50:43.311  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.searchAndFilterPersons() with arguments [s]=[keyword]
2022-01-27 20:50:43.312  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.searchAndFilterPersons Result =[Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}]
2022-01-27 20:50:43.313 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:43.324  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByIdAndRoleId() with arguments [s]=[1, 4]
2022-01-27 20:50:43.325 ERROR 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByIdAndRoleId with cause  = NULL , with message =  The person doesn't exist with id : 1 and role id: 4
2022-01-27 20:50:43.334  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findById() with arguments [s]=[1]
2022-01-27 20:50:43.334  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.findById Result =Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}
2022-01-27 20:50:43.334 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.340  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.getCurrentHistories() with arguments [s]=[Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}]
2022-01-27 20:50:43.349  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.getCurrentHistories Result =[MedicalHistory{id=null, receiptDate=null, dischargeDate=null, diagnosis=null, patient=null}]
2022-01-27 20:50:43.350 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:43.358  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkRequestParameterFromSelect() with arguments [s]=[1]
2022-01-27 20:50:43.358  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.checkRequestParameterFromSelect Result =false
2022-01-27 20:50:43.359 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.368  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByIdAndRoleId() with arguments [s]=[1, 4]
2022-01-27 20:50:43.368  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.findPersonByIdAndRoleId Result =Person{id=1, firstName='Myachin', surname='Artem', patronymic='Valerevich', address='g.Grodno', hireDate=null, dateOfBirthday=2022-01-27}
2022-01-27 20:50:43.369 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:50:43.378  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.PersonServiceImpl.getPageOfPersonWithRoleId() with arguments [s]=[1, 1]
2022-01-27 20:50:43.382  INFO 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.PersonServiceImpl.getPageOfPersonWithRoleId Result =Page 1 of 2 containing com.itacademy.myhospital.model.entity.Person instances
2022-01-27 20:50:43.382 TRACE 1784 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:002
2022-01-27 20:50:43.399  INFO 1784 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:51.468  INFO 13368 --- [main] c.i.m.s.impl.ProcessServiceImplTest      : Starting ProcessServiceImplTest using Java 11.0.12 on WIN-3N9M47L5BER with PID 13368 (started by User in D:\NewProjects\MyHospitalOne\MyHospital)
2022-01-27 20:50:51.470 DEBUG 13368 --- [main] c.i.m.s.impl.ProcessServiceImplTest      : Running with Spring Boot v2.6.1, Spring v5.3.13
2022-01-27 20:50:51.470  INFO 13368 --- [main] c.i.m.s.impl.ProcessServiceImplTest      : No active profile set, falling back to default profiles: default
2022-01-27 20:50:52.586  INFO 13368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-01-27 20:50:52.749  INFO 13368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 10 JPA repository interfaces.
2022-01-27 20:50:53.654  INFO 13368 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'mvcConfig' of type [com.itacademy.myhospital.config.MvcConfig$$EnhancerBySpringCGLIB$$83de7082] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-01-27 20:50:54.914  INFO 13368 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 8.0.4 by Redgate
2022-01-27 20:50:54.914  INFO 13368 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:3306/my_hospital (MySQL 8.0)
2022-01-27 20:50:54.991  INFO 13368 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 15 migrations (execution time 00:00.038s)
2022-01-27 20:50:55.010  INFO 13368 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `my_hospital`: 15
2022-01-27 20:50:55.011  INFO 13368 --- [main] o.f.core.internal.command.DbMigrate      : Schema `my_hospital` is up to date. No migration necessary.
2022-01-27 20:50:55.223  INFO 13368 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2022-01-27 20:50:55.284  INFO 13368 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.1.Final
2022-01-27 20:50:55.335  INFO 13368 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-01-27 20:50:55.529  INFO 13368 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2022-01-27 20:50:56.240  INFO 13368 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-01-27 20:50:56.249  INFO 13368 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:50:56.999  WARN 13368 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-01-27 20:50:57.755  INFO 13368 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ebcfcf1, org.springframework.security.web.context.SecurityContextPersistenceFilter@615bd28b, org.springframework.security.web.header.HeaderWriterFilter@29390110, org.springframework.security.web.authentication.logout.LogoutFilter@11ec699, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1b1d1558, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5482b32a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38241615, org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter@47a68e3f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8e100e7, org.springframework.security.web.session.SessionManagementFilter@17e725fb, org.springframework.security.web.access.ExceptionTranslationFilter@409df37d]
2022-01-27 20:50:58.920  INFO 13368 --- [main] c.i.m.s.impl.ProcessServiceImplTest      : Started ProcessServiceImplTest in 7.878 seconds (JVM running for 9.749)
2022-01-27 20:50:59.002  INFO 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.ProcessServiceImpl.deleteById() with arguments [s]=[4]
2022-01-27 20:50:59.011 ERROR 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.ProcessServiceImpl.deleteById with cause  = NULL , with message =  There is no process with id : 4
2022-01-27 20:50:59.037  INFO 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.ProcessServiceImpl.deleteById() with arguments [s]=[1]
2022-01-27 20:50:59.054  INFO 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.ProcessServiceImpl.findById() with arguments [s]=[4]
2022-01-27 20:50:59.055 ERROR 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Exception in com.itacademy.myhospital.service.impl.ProcessServiceImpl.findById with cause  = NULL , with message =  There is no process with id : 4
2022-01-27 20:50:59.065  INFO 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.ProcessServiceImpl.getMapOfProcesses() with arguments [s]=[1, 2, 3]
2022-01-27 20:50:59.073  INFO 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.ProcessServiceImpl.getMapOfProcesses Result ={Process{id=2, name='PROCEDURE'}=2, Process{id=1, name='OPERATION'}=1, Process{id=3, name='MEDICATION'}=3}
2022-01-27 20:50:59.074 TRACE 13368 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:50:59.098  INFO 13368 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:51:11.912  INFO 9212 --- [main] c.i.m.service.impl.UserServiceTest       : Starting UserServiceTest using Java 11.0.12 on WIN-3N9M47L5BER with PID 9212 (started by User in D:\NewProjects\MyHospitalOne\MyHospital)
2022-01-27 20:51:11.914 DEBUG 9212 --- [main] c.i.m.service.impl.UserServiceTest       : Running with Spring Boot v2.6.1, Spring v5.3.13
2022-01-27 20:51:11.914  INFO 9212 --- [main] c.i.m.service.impl.UserServiceTest       : No active profile set, falling back to default profiles: default
2022-01-27 20:51:13.127  INFO 9212 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-01-27 20:51:13.348  INFO 9212 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 208 ms. Found 10 JPA repository interfaces.
2022-01-27 20:51:14.735  INFO 9212 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'mvcConfig' of type [com.itacademy.myhospital.config.MvcConfig$$EnhancerBySpringCGLIB$$a5798c91] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-01-27 20:51:16.043  INFO 9212 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 8.0.4 by Redgate
2022-01-27 20:51:16.044  INFO 9212 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:3306/my_hospital (MySQL 8.0)
2022-01-27 20:51:16.132  INFO 9212 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 15 migrations (execution time 00:00.050s)
2022-01-27 20:51:16.148  INFO 9212 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `my_hospital`: 15
2022-01-27 20:51:16.149  INFO 9212 --- [main] o.f.core.internal.command.DbMigrate      : Schema `my_hospital` is up to date. No migration necessary.
2022-01-27 20:51:16.363  INFO 9212 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2022-01-27 20:51:16.430  INFO 9212 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.1.Final
2022-01-27 20:51:16.505  INFO 9212 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-01-27 20:51:16.690  INFO 9212 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2022-01-27 20:51:17.741  INFO 9212 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-01-27 20:51:17.750  INFO 9212 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-01-27 20:51:18.464  WARN 9212 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-01-27 20:51:19.298  INFO 9212 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5889e697, org.springframework.security.web.context.SecurityContextPersistenceFilter@2cbd855e, org.springframework.security.web.header.HeaderWriterFilter@40874f54, org.springframework.security.web.authentication.logout.LogoutFilter@3cc5ca01, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@10acfe30, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5dfd4fac, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18a538a0, org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter@665c79a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c3d1214, org.springframework.security.web.session.SessionManagementFilter@2862bac6, org.springframework.security.web.access.ExceptionTranslationFilter@28a33dc9]
2022-01-27 20:51:20.537  INFO 9212 --- [main] c.i.m.service.impl.UserServiceTest       : Started UserServiceTest in 9.061 seconds (JVM running for 10.845)
2022-01-27 20:51:20.612  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.checkChangeOfEmail() with arguments [s]=[User{username='Myachin', authenticationStatus=null, email='Myachin@mail.ru'}, User{username='Myachin', authenticationStatus=true, email='Myachin@mail.ru'}]
2022-01-27 20:51:20.619  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.checkChangeOfEmail Result =false
2022-01-27 20:51:20.620 TRACE 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:005
2022-01-27 20:51:20.682  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.checkAndChangeVerificationStatus() with arguments [s]=[daskdmqkwq]
2022-01-27 20:51:20.683  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.checkAndChangeVerificationStatus Result =true
2022-01-27 20:51:20.683 TRACE 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:51:20.692  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.saveUpdatedUser() with arguments [s]=[User{username='Dima', authenticationStatus=false, email='Dimochka@mail.ru'}, org.springframework.mock.web.MockMultipartFile@2080ee70]
2022-01-27 20:51:20.698  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.saveUpdatedUser Result =true
2022-01-27 20:51:20.699 TRACE 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:004
2022-01-27 20:51:20.710  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.createCodeAndSaveUser() with arguments [s]=[User{username='bababa', authenticationStatus=null, email='emkds@mail.ru'}]
2022-01-27 20:51:20.818  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.createCodeAndSaveUser Result =true
2022-01-27 20:51:20.818 TRACE 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:107
2022-01-27 20:51:20.826  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.checkChangeOfEmail() with arguments [s]=[User{username='Myachin', authenticationStatus=null, email='Myachin1997@mail.ru'}, User{username='Myachin', authenticationStatus=true, email='Myachin@mail.ru'}]
2022-01-27 20:51:20.827  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.checkChangeOfEmail Result =true
2022-01-27 20:51:20.827 TRACE 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:001
2022-01-27 20:51:20.842  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Request for com.itacademy.myhospital.service.impl.UserServiceImpl.checkAndChangeVerificationStatus() with arguments [s]=[dadada]
2022-01-27 20:51:20.843  INFO 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Response for com.itacademy.myhospital.service.impl.UserServiceImpl.checkAndChangeVerificationStatus Result =false
2022-01-27 20:51:20.844 TRACE 9212 --- [main] c.i.myhospital.aop.LoggingAspect         : Time taken =00:00:000
2022-01-27 20:51:20.863  INFO 9212 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
